<article class="recipe-details">
    <div class="recipe-head">

        <div class="recipe-details-heading-container">
            <h1 class="listing-heading" data-testid="recipe-details-name">{{recipe?.name}}</h1>
            <div class="recipe-details-button-container">
                <button mat-raised-button class="button-recipe-details" color="accent" aria-label="Button update recipe"
                        [routerLink]="['/update_recipe', recipe?.id]">
                    <mat-icon>mode</mat-icon>
                    Bearbeiten
                </button>
                <button mat-raised-button class="button-delete-recipe button-recipe-details" color="accent"
                        aria-label="Button delete recipe" (click)="deleteRecipe()">
                    <mat-icon>delete</mat-icon>
                    Löschen
                </button>
            </div>
        </div>

        <div class="photo-container">
            <img class="listing-photo" [src]="recipe?.photo"
                 alt="Exterior photo of {{recipe?.name}}"/>
        </div>

        <section class="listing-description">
            <div class="info-area">
                <div class="chip-area">
                    <mat-chip class="chip" data-testid="recipe-details-time-chip">
                        <mat-icon color="accent">alarm</mat-icon>
                        Vorbereitungszeit ca. {{recipe?.preperation_time}}
                    </mat-chip>
                    <mat-chip class="chip" data-testid="recipe-details-time-chip">
                        <mat-icon color="accent">alarm</mat-icon>
                        Gesamtzeit ca. {{recipe?.total_time}}
                    </mat-chip>
                </div>

                <div class="add-favorite">
                    <button mat-raised-button color="accent" aria-label="Button add recipe to favorites"
                            (click)="addToFavorites()">
                        {{favorite_text}}
                        <mat-icon>favorite</mat-icon>
                    </button>
                </div>
            </div>

            <div class="recipe-details-ingredient-heading-container">
                <h2 class="recipe-details-ingredient-heading" data-testid="recipe-details-persons">Zutaten für {{persons}} Personen</h2>
                <div class="recipe-details-ingredient-buttons">
                    <button mat-mini-fab class="button-persons" (click)="addPerson()" color="primary" data-testid="recipe-details-add-person">
                        <mat-icon>add</mat-icon>
                    </button>
                    <button mat-mini-fab class="button-persons" (click)="removePerson()" color="warn" data-testid="recipe-details-remove-person">
                        <mat-icon>remove</mat-icon>
                    </button>
                </div>
            </div>

            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 table" data-testid="recipe-details-ingredient-table">
                <ng-container matColumnDef="Menge">
                    <th mat-header-cell *matHeaderCellDef> Menge</th>
                    <td mat-cell *matCellDef="let element "> {{element.amount}} {{element.unit}}</td>
                </ng-container>

                <ng-container matColumnDef="Zutat">
                    <th mat-header-cell *matHeaderCellDef> Zutat</th>
                    <td mat-cell *matCellDef="let element"> {{element.ingredient}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </section>

        <section class="listing-features">
            <h2 class="recipe-details-steps-heading">Zubereitung:</h2>
            <p class="recipe-steps" *ngFor="let step of recipe?.steps" data-testid="recipe-details-steps">
                {{step}}
            </p>
        </section>

    </div>
</article>
